<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title></title>
    <script type="text/javascript" src="//code.jquery.com/jquery-1.4.2.min.js"></script>
    <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/socket.io/1.3.5/socket.io.min.js"></script>
</head>
<body>
<h1 id="t">hi</h1>
<script type="text/javascript">
    $(document).ready(function() {
        var token = 'eyJhbGciOiJIUzI1NiIsImlhdCI6MTU1NjE3NDY3OSwiZXhwIjoxNTU2Nzc5NDc5fQ.eyJ1c2VybmFtZSI6InBhbnQiLCJpZCI6ImI2MmQwYmVjLTVmNTItMTFlOS05NzI0LTAwMTYzZTA4ZDMwZiIsIm1vZGVsIjoiVXNlciIsImxldmVsIjoyfQ.80uoTeK8OOAaT_SToamDgtWnKyGzrYfaY1OpY3AUZ2Y';
        // namespace = '/getplatfromMessage/' + token;
        var route_url = '/getplatfromMessage/' + token;
        var socket = io.connect(location.protocol + '//' + document.domain + ':' + location.port);
        // socket.on('server_response', function(res) {
        //     console.log(res.data);
        //     $('#t').text(res.data);
        // });
        socket.on('connect', function() {
        //客户端通过emit发送的命名事件数据,服务端只能使用对应自定义事件接收处理,
        //客户端定义的事件回调函数接收的数据来自于服务端对应事件处理函数的返回值
        socket.emit('my event', {data: 'I\'m connected!'},function (res) {
            console.log('my event :',res)
        });
        //send 发送未命名时间事件数据，flask 使用'message' 接收
        socket.send({'data': 'hello word!'}, function(data){
            console.log('#=> recive server data', data);
        });
        // socket.
    });
    });
</script>
</body>
</html>